<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card Status Test</title>
    <link rel="stylesheet" href="units.css">
    <style>
        body { 
            font-family: Arial, sans-serif; 
            background: #2c3e50; 
            color: white; 
            padding: 20px; 
        }
        .test-section { 
            margin: 20px 0; 
            padding: 20px; 
            background: #34495e; 
            border-radius: 8px; 
        }
        .card { 
            width: 120px; 
            height: 80px; 
            margin: 10px; 
            display: inline-block; 
            border-radius: 8px; 
            background: linear-gradient(135deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .test-buttons {
            margin: 10px 0;
        }
        .test-buttons button {
            margin: 5px;
            padding: 8px 12px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .test-buttons button:hover {
            background: #2980b9;
        }
    </style>
</head>
<body>
    <h1>Card Status System Test</h1>
    
    <div class="test-section">
        <h2>Card Status Examples</h2>
        <div class="card pending">Pending Card</div>
        <div class="card used">Used Card</div>
        <div class="card scored">Scored Card</div>
        <div class="card kept">Kept Card</div>
        <div class="card discarded">Discarded Card</div>
    </div>
    
    <div class="test-section">
        <h2>Interactive Test Card</h2>
        <div id="test-card" class="card pending">Test Card</div>
        <div class="test-buttons">
            <button onclick="setStatus('pending')">Set Pending</button>
            <button onclick="setStatus('used')">Set Used</button>
            <button onclick="setStatus('scored')">Set Scored</button>
            <button onclick="setStatus('kept')">Set Kept</button>
            <button onclick="setStatus('discarded')">Set Discarded</button>
        </div>
        <p>Current Status: <span id="current-status">Pending</span></p>
    </div>

    <div class="test-section">
        <h2>Modal Logic Test</h2>
        <div class="test-buttons">
            <label>
                <input type="checkbox" id="end-of-round"> End of Round
            </label>
            <label>
                <input type="checkbox" id="player-turn"> Player Turn
            </label>
            <label>
                Starting Player: 
                <select id="starting-player">
                    <option value="player">Player</option>
                    <option value="enemy">Enemy</option>
                </select>
            </label>
            <button onclick="testModalLogic()">Test Modal Logic</button>
        </div>
        <div id="modal-result">
            <p>Modal State: <span id="modal-show">-</span></p>
            <p>Show Primary: <span id="modal-primary">-</span></p>
            <p>Available Actions: <span id="modal-actions">-</span></p>
        </div>
    </div>

    <script>
        // Simple implementation of the card status system for testing
        let cardStates = {};
        
        function getCardStatus(cardNumber) {
            return cardStates[cardNumber] || 'pending';
        }
        
        function setCardStatus(cardNumber, status) {
            cardStates[cardNumber] = status;
            console.log(`Card ${cardNumber} status set to: ${status}`);
        }
        
        function setStatus(status) {
            const testCard = document.getElementById('test-card');
            const statusSpan = document.getElementById('current-status');
            
            // Remove all status classes
            testCard.className = 'card';
            // Add new status class
            testCard.classList.add(status);
            statusSpan.textContent = status.charAt(0).toUpperCase() + status.slice(1);
            
            // Update internal state
            setCardStatus('test', status);
        }
        
        function testModalLogic() {
            const isEndOfRound = document.getElementById('end-of-round').checked;
            const isPlayerTurn = document.getElementById('player-turn').checked;
            const startingPlayer = document.getElementById('starting-player').value;
            
            // Simulate the modal logic from the game
            let showModal = false;
            let showPrimary = false;
            let availableButtons = [];
            
            if (isEndOfRound) {
                if (startingPlayer === 'player') {
                    if (isPlayerTurn) {
                        // Player starts, end of player's turn
                        showModal = true;
                        showPrimary = true;
                        availableButtons = ['score', 'keep'];
                    } else {
                        // Player starts, end of enemy's turn  
                        showModal = true;
                        showPrimary = false;
                        availableButtons = ['keep', 'discard'];
                    }
                } else {
                    // Enemy starts
                    if (isPlayerTurn) {
                        // Enemy starts, end of player's turn
                        showModal = true;
                        showPrimary = true;
                        availableButtons = ['score', 'discard', 'keep'];
                    } else {
                        // Enemy starts, end of enemy's turn
                        showModal = false;
                        showPrimary = false;
                        availableButtons = [];
                    }
                }
            }
            
            // Update display
            document.getElementById('modal-show').textContent = showModal ? 'Show' : 'Hide';
            document.getElementById('modal-primary').textContent = showPrimary ? 'Show' : 'Hide';
            document.getElementById('modal-actions').textContent = availableButtons.join(', ') || 'None';
        }
    </script>
</body>
</html>